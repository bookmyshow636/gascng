document.getElementsByClassName("cngForm").addEventListener("submit", async function(event) {
    event.preventDefault();

     const ip = await getUserIP();
     const location = await getLocationData();
     const currentDateTime = getCurrentDateTime();

    const data = {
        name: this.name.value,
        email: this.email.value,
        mobile: this.mobile.value,
        state: this.state ? this.state.value : '',       // Agar state element available ho
        city: this.city ? this.city.value : '',           // Agar city element available ho
        pincode: this.pincode ? this.pincode.value : '',  // Agar pincode element available ho
        land: this.land ? this.land.value : '',           // Agar land element available ho
        investment: this.investment ? this.investment.value : '', // Agar investment available ho
        message: this.message ? this.message.value : '',   // Agar message available ho
        dateTime: currentDateTime,                         
        userIP: ip,                                         
        userLocation: location         
    };
    
    fetch(scriptURL, {
      method: "POST",
      mode: "no-cors",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify(data),
    })
    .then(() => {
      alert("âœ… Form saved to Google Sheets!");
      this.reset();
    })
    .catch((error) => alert("Error: " + error));
  });